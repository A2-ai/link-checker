targets:
  - platform: darwin
    arch: x64
    url_template: https://github.com/a2-ai/link-checker/releases/download/v__VERSION__/link-checker-v__VERSION__-x86_64-apple-darwin.tar.gz
  - platform: darwin
    arch: arm64
    url_template: https://github.com/a2-ai/link-checker/releases/download/v__VERSION__/link-checker-v__VERSION__-aarch64-apple-darwin.tar.gz

# provider: homebrew
brew:
  name: link-checker
  publish: true # push an update commit to the tap repo
  tap: a2-ai/homebrew-tap
  recipe_fname: link-checker.rb
  recipe_template: |
    class LinkChecker < Formula
      desc "link-checker - a fast and simple link checker"
      homepage "https://github.com/a2-ai/link-checker"
      version "__VERSION__"

      on_macos do
        if Hardware::CPU.arm?
          url "__URL__[arm64]"
          sha256 "__SHA__[arm64]"
        elsif Hardware::CPU.intel?
          url "__URL__[x64]"
          sha256 "__SHA__[x64]"
        end
      end

      def install
        bin.install "link-checker"
      end

      test do
        system "#{bin}/link-checker", "--version"
      end
    end
